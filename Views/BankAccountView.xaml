<UserControl x:Class="RichIZ.Views.BankAccountView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:RichIZ.ViewModels">
    <UserControl.DataContext>
        <vm:BankAccountViewModel/>
    </UserControl.DataContext>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Text="ðŸ¦ ì€í–‰ ìžì‚° ê´€ë¦¬" Style="{StaticResource TitleStyle}"/>

        <!-- ì´ ìž”ì•¡ -->
        <Border Grid.Row="1" Style="{StaticResource CardStyle}" Margin="0,0,0,20" Background="#E8F5E9">
            <StackPanel>
                <TextBlock Text="ì´ ì€í–‰ ìž”ì•¡" FontSize="16" Foreground="#7F8C8D"/>
                <TextBlock FontSize="32" FontWeight="Bold" Foreground="#27AE60">
                    <Run Text="{Binding TotalBalance, StringFormat='{}{0:N0}'}"/>
                    <Run Text="ì›" FontSize="20"/>
                </TextBlock>
            </StackPanel>
        </Border>

        <!-- ìž…ë ¥ í¼ -->
        <Border Grid.Row="2" Style="{StaticResource CardStyle}" Margin="0,0,0,20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Grid.Column="0" Margin="0,0,10,10">
                    <TextBlock Text="ì€í–‰ëª…" Style="{StaticResource LabelStyle}"/>
                    <TextBox Text="{Binding BankName, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource InputStyle}"/>
                </StackPanel>

                <StackPanel Grid.Row="0" Grid.Column="1" Margin="10,0,10,10">
                    <TextBlock Text="ê³„ì¢Œë²ˆí˜¸" Style="{StaticResource LabelStyle}"/>
                    <TextBox Text="{Binding AccountNumber, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource InputStyle}"/>
                </StackPanel>

                <StackPanel Grid.Row="0" Grid.Column="2" Margin="10,0,0,10">
                    <TextBlock Text="ê³„ì¢Œ ìœ í˜•" Style="{StaticResource LabelStyle}"/>
                    <ComboBox SelectedItem="{Binding SelectedAccountType}" Height="35" FontSize="14">
                        <ComboBox.Items>
                            <ComboBoxItem Content="ìž…ì¶œê¸ˆ" Tag="Checking" IsSelected="True"/>
                            <ComboBoxItem Content="ì €ì¶•" Tag="Savings"/>
                            <ComboBoxItem Content="ì •ê¸°ì˜ˆê¸ˆ" Tag="FixedDeposit"/>
                            <ComboBoxItem Content="ì ê¸ˆ" Tag="InstallmentSavings"/>
                        </ComboBox.Items>
                    </ComboBox>
                </StackPanel>

                <StackPanel Grid.Row="1" Grid.Column="0" Margin="0,0,10,10">
                    <TextBlock Text="ìž”ì•¡" Style="{StaticResource LabelStyle}"/>
                    <TextBox Text="{Binding Balance, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource InputStyle}"/>
                </StackPanel>

                <StackPanel Grid.Row="1" Grid.Column="1" Margin="10,0,10,10">
                    <TextBlock Text="ê¸ˆë¦¬ (%)" Style="{StaticResource LabelStyle}"/>
                    <TextBox Text="{Binding InterestRate, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource InputStyle}"/>
                </StackPanel>

                <StackPanel Grid.Row="1" Grid.Column="2" Margin="10,0,0,10">
                    <TextBlock Text="ë³„ì¹­ (ì„ íƒ)" Style="{StaticResource LabelStyle}"/>
                    <TextBox Text="{Binding AccountNickname, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource InputStyle}"/>
                </StackPanel>

                <StackPanel Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                    <Button Content="ì¶”ê°€" Command="{Binding AddAccountCommand}" Style="{StaticResource PrimaryButtonStyle}" Margin="0,0,10,0"/>
                    <Button Content="ìž”ì•¡ ì—…ë°ì´íŠ¸" Command="{Binding UpdateBalanceCommand}" Style="{StaticResource PrimaryButtonStyle}" Margin="0,0,10,0"/>
                    <Button Content="ì‚­ì œ" Command="{Binding DeleteAccountCommand}" Style="{StaticResource DangerButtonStyle}"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- ê³„ì¢Œ ëª©ë¡ -->
        <Border Grid.Row="3" Style="{StaticResource CardStyle}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Text="ë³´ìœ  ê³„ì¢Œ" FontSize="18" FontWeight="Bold" Margin="0,0,0,15"/>

                <DataGrid Grid.Row="1" ItemsSource="{Binding BankAccounts}" SelectedItem="{Binding SelectedAccount}">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ì€í–‰ëª…" Binding="{Binding BankName}" Width="*"/>
                        <DataGridTextColumn Header="ê³„ì¢Œë²ˆí˜¸" Binding="{Binding AccountNumber}" Width="150"/>
                        <DataGridTextColumn Header="ìœ í˜•" Binding="{Binding AccountType}" Width="100"/>
                        <DataGridTextColumn Header="ìž”ì•¡" Binding="{Binding Balance, StringFormat='{}{0:N0}ì›'}" Width="150"/>
                        <DataGridTextColumn Header="ê¸ˆë¦¬" Binding="{Binding InterestRate, StringFormat='{}{0:N2}%'}" Width="80"/>
                        <DataGridTextColumn Header="ë³„ì¹­" Binding="{Binding AccountNickname}" Width="100"/>
                        <DataGridTextColumn Header="ìµœì¢… ì—…ë°ì´íŠ¸" Binding="{Binding LastUpdated, StringFormat=yyyy-MM-dd}" Width="120"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </Border>
    </Grid>
</UserControl>
