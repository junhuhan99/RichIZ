<UserControl x:Class="RichIZ.Views.BankAccountView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:RichIZ.ViewModels">
    <UserControl.DataContext>
        <vm:BankAccountViewModel/>
    </UserControl.DataContext>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Text="🏦 은행 자산 관리" Style="{StaticResource TitleStyle}"/>

        <!-- 총 잔액 -->
        <Border Grid.Row="1" Style="{StaticResource CardStyle}" Margin="0,0,0,20" Background="#E8F5E9">
            <StackPanel>
                <TextBlock Text="총 은행 잔액" FontSize="16" Foreground="#7F8C8D"/>
                <TextBlock FontSize="32" FontWeight="Bold" Foreground="#27AE60">
                    <Run Text="{Binding TotalBalance, StringFormat='{}{0:N0}'}"/>
                    <Run Text="원" FontSize="20"/>
                </TextBlock>
            </StackPanel>
        </Border>

        <!-- 입력 폼 -->
        <Border Grid.Row="2" Style="{StaticResource CardStyle}" Margin="0,0,0,20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Grid.Column="0" Margin="0,0,10,10">
                    <TextBlock Text="은행명" Style="{StaticResource LabelStyle}"/>
                    <TextBox Text="{Binding BankName, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource InputStyle}"/>
                </StackPanel>

                <StackPanel Grid.Row="0" Grid.Column="1" Margin="10,0,10,10">
                    <TextBlock Text="계좌번호" Style="{StaticResource LabelStyle}"/>
                    <TextBox Text="{Binding AccountNumber, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource InputStyle}"/>
                </StackPanel>

                <StackPanel Grid.Row="0" Grid.Column="2" Margin="10,0,0,10">
                    <TextBlock Text="계좌 유형" Style="{StaticResource LabelStyle}"/>
                    <ComboBox SelectedItem="{Binding SelectedAccountType}" Height="35" FontSize="14">
                        <ComboBox.Items>
                            <ComboBoxItem Content="입출금" Tag="Checking" IsSelected="True"/>
                            <ComboBoxItem Content="저축" Tag="Savings"/>
                            <ComboBoxItem Content="정기예금" Tag="FixedDeposit"/>
                            <ComboBoxItem Content="적금" Tag="InstallmentSavings"/>
                        </ComboBox.Items>
                    </ComboBox>
                </StackPanel>

                <StackPanel Grid.Row="1" Grid.Column="0" Margin="0,0,10,10">
                    <TextBlock Text="잔액" Style="{StaticResource LabelStyle}"/>
                    <TextBox Text="{Binding Balance, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource InputStyle}"/>
                </StackPanel>

                <StackPanel Grid.Row="1" Grid.Column="1" Margin="10,0,10,10">
                    <TextBlock Text="금리 (%)" Style="{StaticResource LabelStyle}"/>
                    <TextBox Text="{Binding InterestRate, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource InputStyle}"/>
                </StackPanel>

                <StackPanel Grid.Row="1" Grid.Column="2" Margin="10,0,0,10">
                    <TextBlock Text="별칭 (선택)" Style="{StaticResource LabelStyle}"/>
                    <TextBox Text="{Binding AccountNickname, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource InputStyle}"/>
                </StackPanel>

                <StackPanel Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                    <Button Content="추가" Command="{Binding AddAccountCommand}" Style="{StaticResource PrimaryButtonStyle}" Margin="0,0,10,0"/>
                    <Button Content="잔액 업데이트" Command="{Binding UpdateBalanceCommand}" Style="{StaticResource PrimaryButtonStyle}" Margin="0,0,10,0"/>
                    <Button Content="삭제" Command="{Binding DeleteAccountCommand}" Style="{StaticResource DangerButtonStyle}"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- 계좌 목록 -->
        <Border Grid.Row="3" Style="{StaticResource CardStyle}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Text="보유 계좌" FontSize="18" FontWeight="Bold" Margin="0,0,0,15"/>

                <DataGrid Grid.Row="1" ItemsSource="{Binding BankAccounts}" SelectedItem="{Binding SelectedAccount}">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="은행명" Binding="{Binding BankName}" Width="*"/>
                        <DataGridTextColumn Header="계좌번호" Binding="{Binding AccountNumber}" Width="150"/>
                        <DataGridTextColumn Header="유형" Binding="{Binding AccountType}" Width="100"/>
                        <DataGridTextColumn Header="잔액" Binding="{Binding Balance, StringFormat='{}{0:N0}원'}" Width="150"/>
                        <DataGridTextColumn Header="금리" Binding="{Binding InterestRate, StringFormat='{}{0:N2}%'}" Width="80"/>
                        <DataGridTextColumn Header="별칭" Binding="{Binding AccountNickname}" Width="100"/>
                        <DataGridTextColumn Header="최종 업데이트" Binding="{Binding LastUpdated, StringFormat=yyyy-MM-dd}" Width="120"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </Border>
    </Grid>
</UserControl>
